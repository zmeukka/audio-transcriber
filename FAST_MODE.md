# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Ä–µ–∂–∏–º Audio Transcriber

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∑–∞–ø—É—Å–∫ WhisperX –∑–∞–Ω–∏–º–∞–µ—Ç **45-60 —Å–µ–∫—É–Ω–¥** –∏–∑-–∑–∞:
- –ó–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏ (~20-30 —Å–µ–∫)
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ PyTorch (~10-15 —Å–µ–∫)  
- –ó–∞–≥—Ä—É–∑–∫–∏ align –º–æ–¥–µ–ª–∏ (~10-15 —Å–µ–∫)
- –ò–º–ø–æ—Ä—Ç–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫ (~5-10 —Å–µ–∫)

## ‚ö° –†–µ—à–µ–Ω–∏–µ: Pre-warming
–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–µ–π –≤ –ø–∞–º—è—Ç—å –¥–ª—è **10-20x —É—Å–∫–æ—Ä–µ–Ω–∏—è** –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—É—Å–∫–æ–≤.

## üìã –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π pre-warming (–æ–¥–∏–Ω —Ä–∞–∑)

**Windows:**
```powershell
.\start_prewarmer.ps1
```

**Ubuntu:**
```bash
chmod +x start_prewarmer.sh
./start_prewarmer.sh
```

**–ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é:**
```bash
python prewarmer.py
```

### 2. –ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```bash
# Windows
$env:PYTHONIOENCODING="utf-8"; $env:PYTHONUTF8="1"; python transcriber.py --fast --test

# Ubuntu  
python transcriber.py --fast --test
```

**–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–∞:**
```bash
# Windows
$env:PYTHONIOENCODING="utf-8"; $env:PYTHONUTF8="1"; python transcriber.py --fast --file input\audio.oga

# Ubuntu
python transcriber.py --fast --file input/audio.oga
```

**–ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±—ã—Å—Ç—Ä–æ–≥–æ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–µ—Ä–∞:**
```bash
python fast_transcriber.py --file input/audio.oga
```

## ‚è±Ô∏è –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏

| –†–µ–∂–∏–º | –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ | –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—É—Å–∫–∏ |
|-------|---------------|-------------------|
| **–û–±—ã—á–Ω—ã–π** | 45-60 —Å–µ–∫ | 45-60 —Å–µ–∫ |
| **–ë—ã—Å—Ç—Ä—ã–π** | 45-60 —Å–µ–∫ | **2-5 —Å–µ–∫** |

## üîß –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### Pre-warming –ø—Ä–æ—Ü–µ—Å—Å:
1. **–ó–∞–≥—Ä—É–∂–∞–µ—Ç –º–æ–¥–µ–ª—å WhisperX** –≤ –ø–∞–º—è—Ç—å
2. **–ó–∞–≥—Ä—É–∂–∞–µ—Ç align –º–æ–¥–µ–ª—å** –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞
3. **–í—ã–ø–æ–ª–Ω—è–µ—Ç —Ç–µ—Å—Ç–æ–≤—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É** –¥–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
4. **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ** –æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã

### –ë—ã—Å—Ç—Ä—ã–π —Ä–µ–∂–∏–º:
1. **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å** pre-warmed –º–æ–¥–µ–ª–µ–π
2. **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏** –≤–º–µ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
3. **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∞—É–¥–∏–æ** —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏ —Ä–∞—Å—Ö–æ–¥–∞–º–∏

## üìÅ –§–∞–π–ª—ã —Å–∏—Å—Ç–µ–º—ã

```
cache/                          # –ö—ç—à pre-warming
‚îú‚îÄ‚îÄ warmed_state.pkl           # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
prewarmer.py                   # Pre-warming –º–æ–¥—É–ª—å
fast_transcriber.py            # –ë—ã—Å—Ç—Ä—ã–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–µ—Ä
start_prewarmer.ps1           # –ó–∞–ø—É—Å–∫ –¥–ª—è Windows
start_prewarmer.sh            # –ó–∞–ø—É—Å–∫ –¥–ª—è Ubuntu
```

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ pre-warming –æ–¥–∏–Ω —Ä–∞–∑** –≤ –Ω–∞—á–∞–ª–µ —Å–µ—Å—Å–∏–∏
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±—ã—Å—Ç—Ä—ã–π —Ä–µ–∂–∏–º** –¥–ª—è –≤—Å–µ—Ö –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –æ–±—Ä–∞–±–æ—Ç–æ–∫
3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–π—Ç–µ pre-warming** —Ä–∞–∑ –≤ —Å—É—Ç–∫–∏

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
1. **–ó–∞–ø—É—Å–∫–∞–π—Ç–µ pre-warming** –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –±—ã—Å—Ç—Ä—ã–π —Ä–µ–∂–∏–º** –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
3. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ø–∞–º—è—Ç—å** (–º–æ–¥–µ–ª–∏ –∑–∞–Ω–∏–º–∞—é—Ç ~2-3GB)

### –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö:
```bash
# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
rm -rf cache/

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ pre-warming
python prewarmer.py
```

## üéØ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏:
- **CPU:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `compute_type: "int8"`
- **GPU:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `compute_type: "float16"`
- **–ú–æ–¥–µ–ª—å:** `"base"` - –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å

### –≠–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏:
- **–ú–æ–¥–µ–ª—å:** `"tiny"` –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤
- **–û—Ç–∫–ª—é—á–∏—Ç–µ align:** –¥–ª—è —è–∑—ã–∫–æ–≤ –±–µ–∑ –ø–æ–¥–¥–µ—Ä–∂–∫–∏

## üö® –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **–¢–æ–ª—å–∫–æ –æ–¥–∏–Ω–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã** –≤ –±—ã—Å—Ç—Ä–æ–º —Ä–µ–∂–∏–º–µ
2. **–í—ã—Å–æ–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏** (~2-3GB)
3. **–ú–æ–¥–µ–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏** –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞
4. **–¢—Ä–µ–±—É–µ—Ç pre-warming** –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
5. **–ü–∞—Ä–∞–º–µ—Ç—Ä temperature –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è** –≤ –±—ã—Å—Ç—Ä–æ–º —Ä–µ–∂–∏–º–µ (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ WhisperX API)

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –†–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
- **–û—à–∏–±–∫–∞ temperature:** –£–±—Ä–∞–Ω –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä –∏–∑ API –≤—ã–∑–æ–≤–∞
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π:** –†–∞–±–æ—Ç–∞–µ—Ç —Å torch 2.8.0 –∏ torchaudio 2.8.0
- **Warnings:** –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –≤–µ—Ä—Å–∏—è—Ö pyannote.audio –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã

## üéâ –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞

```bash
# 1. –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–æ–¥–∏–Ω —Ä–∞–∑)
python prewarmer.py                    # 45-60 —Å–µ–∫

# 2. –ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤
python transcriber.py --fast --test    # 2-3 —Å–µ–∫ ‚ö°
python transcriber.py --fast --file input/audio1.oga  # 2-5 —Å–µ–∫ ‚ö°
python transcriber.py --fast --file input/audio2.oga  # 2-5 —Å–µ–∫ ‚ö°
python transcriber.py --fast --file input/audio3.oga  # 2-5 —Å–µ–∫ ‚ö°
```

**–≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏:** –í–º–µ—Å—Ç–æ 4√ó60=240 —Å–µ–∫ ‚Üí 60+4√ó3=72 —Å–µ–∫ = **70% —É—Å–∫–æ—Ä–µ–Ω–∏–µ!** üî•
