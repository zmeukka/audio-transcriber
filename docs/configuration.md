# ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Audio Transcriber

## üìã –§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ config.yaml

### –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```yaml
# Audio Transcriber API Configuration

# Directory paths - simplified to single shared directory
shared_directory: "./shared"

# Processing settings
processing_timeout: 180  # 3 minutes
max_retries: 3
log_level: "INFO"

# API configuration
api:
  host: "0.0.0.0"
  port: 8000
  debug: false

# WhisperX settings
whisperx:
  default_model: "small"
  default_compute_type: "float32"
  default_language: null  # Auto-detect
  batch_size: 16
  device: "cpu"  # or "cuda" if GPU available

# File monitoring
monitoring:
  enabled: true
  scan_interval: 60  # seconds
```

## üîß –î–µ—Ç–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### üìÅ –ü—É—Ç–∏ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
```yaml
# –ü—É—Ç—å –∫ shared –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (–µ–¥–∏–Ω–∞—è –¥–ª—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤)
shared_directory: "./shared"
```

**–û–ø–∏—Å–∞–Ω–∏–µ:**
- `shared_directory` - –µ–¥–∏–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ (–∏—Å—Ö–æ–¥–Ω—ã–µ –∞—É–¥–∏–æ, —Å—Ç–∞—Ç—É—Å–Ω—ã–µ —Ñ–∞–π–ª—ã, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã)
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º –∏–ª–∏ –∞–±—Å–æ–ª—é—Ç–Ω—ã–º –ø—É—Ç–µ–º
- –í Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ volume

### ‚è±Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
```yaml
# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ (—Å–µ–∫—É–Ω–¥—ã)
processing_timeout: 180

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –ø—Ä–∏ –æ—à–∏–±–∫–µ
max_retries: 3

# –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
log_level: "INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL
```

**processing_timeout:**
- Timeout –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ WhisperX
- –ü–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: 180-600 —Å–µ–∫—É–Ω–¥

**max_retries:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –ø—Ä–∏ –æ—à–∏–±–∫–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –ú–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏ —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞: 2^attempt —Å–µ–∫—É–Ω–¥
- –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ –∑–∞–¥–∞—á–∞ –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ ERROR

**log_level:**
- DEBUG: –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- INFO: –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π)
- WARNING: —Ç–æ–ª—å–∫–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –æ—à–∏–±–∫–∏
- ERROR: —Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
- CRITICAL: —Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏

### üåê API –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```yaml
api:
  host: "0.0.0.0"        # Bind –Ω–∞ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö
  port: 8000             # –ü–æ—Ä—Ç API —Å–µ—Ä–≤–µ—Ä–∞
  debug: false           # –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
```

**host:**
- `"0.0.0.0"` - –¥–æ—Å—Ç—É–ø —Å–æ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ (Docker)
- `"127.0.0.1"` - —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø
- `"localhost"` - —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø

**port:**
- –ü–æ—Ä—Ç –¥–ª—è HTTP API —Å–µ—Ä–≤–µ—Ä–∞
- –í Docker –¥–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –ø—Ä–æ–±—Ä–æ—à–µ–Ω–Ω–æ–º—É –ø–æ—Ä—Ç—É

**debug:**
- –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö API –∑–∞–ø—Ä–æ—Å–∞—Ö
- `true` - –≤–∫–ª—é—á–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### ü§ñ WhisperX –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```yaml
whisperx:
  default_model: "small"          # –ú–æ–¥–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  default_compute_type: "float32" # –¢–∏–ø –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  default_language: null          # –Ø–∑—ã–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (auto-detect)
  batch_size: 16                  # –†–∞–∑–º–µ—Ä batch –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
  device: "cpu"                   # –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
```

**default_model:**
- `tiny` (39 MB) - —Å–∞–º–∞—è –±—ã—Å—Ç—Ä–∞—è, –Ω–∞–∏–º–µ–Ω—å—à–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
- `base` (74 MB) - –±–∞–ª–∞–Ω—Å —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–∞
- `small` (244 MB) - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤
- `medium` (769 MB) - –≤—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å, –º–µ–¥–ª–µ–Ω–Ω–µ–µ
- `large` (1550 MB) - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å, —Å–∞–º–∞—è –º–µ–¥–ª–µ–Ω–Ω–∞—è

**default_compute_type:**
- `float16` - –±—ã—Å—Ç—Ä–µ–µ, –º–µ–Ω—å—à–µ –ø–∞–º—è—Ç–∏, –Ω–µ–º–Ω–æ–≥–æ –º–µ–Ω—å—à–µ —Ç–æ—á–Ω–æ—Å—Ç–∏
- `float32` - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π
- `int8` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å, –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å

**default_language:**
- `null` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞
- `"en"` - –∞–Ω–≥–ª–∏–π—Å–∫–∏–π
- `"ru"` - —Ä—É—Å—Å–∫–∏–π
- `"de"` - –Ω–µ–º–µ—Ü–∫–∏–π
- –ò –¥—Ä—É–≥–∏–µ ISO 639-1 –∫–æ–¥—ã —è–∑—ã–∫–æ–≤

**batch_size:**
- –†–∞–∑–º–µ—Ä batch –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞—É–¥–∏–æ
- –ë–æ–ª—å—à–µ –∑–Ω–∞—á–µ–Ω–∏–µ = –±–æ–ª—å—à–µ –ø–∞–º—è—Ç–∏, –≤–æ–∑–º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–µ–µ
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: 8-32

**device:**
- `"cpu"` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ)
- `"cuda"` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ NVIDIA GPU (—Ç—Ä–µ–±—É–µ—Ç CUDA)
- `"auto"` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

### üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ñ–∞–π–ª–æ–≤
```yaml
monitoring:
  enabled: true          # –í–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
  scan_interval: 60      # –ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
```

**enabled:**
- `true` - –≤–∫–ª—é—á–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤
- `false` - –æ—Ç–∫–ª—é—á–∞–µ—Ç –∞–≤—Ç–æ—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (—Ç–æ–ª—å–∫–æ API –∑–∞–ø—Ä–æ—Å—ã)

**scan_interval:**
- –ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è shared –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
- –ú–µ–Ω—å—à–µ –∑–Ω–∞—á–µ–Ω–∏–µ = –±—ã—Å—Ç—Ä–µ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ, –±–æ–ª—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: 30-300 —Å–µ–∫—É–Ω–¥

## üîß –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```yaml
# config-dev.yaml
shared_directory: "./shared"
processing_timeout: 300  # –ë–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
max_retries: 1          # –ú–µ–Ω—å—à–µ –ø–æ–ø—ã—Ç–æ–∫ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
log_level: "DEBUG"      # –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏

api:
  host: "127.0.0.1"     # –¢–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø
  port: 8000
  debug: true           # –í–∫–ª—é—á–µ–Ω debug –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

whisperx:
  default_model: "tiny"      # –ë—ã—Å—Ç—Ä–∞—è –º–æ–¥–µ–ª—å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  default_compute_type: "float32"
  default_language: "en"     # –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —è–∑—ã–∫
  batch_size: 8             # –ú–µ–Ω—å—à–∏–π batch –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –ø–∞–º—è—Ç–∏
  device: "cpu"

monitoring:
  enabled: true
  scan_interval: 30     # –ë—ã—Å—Ç—Ä–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞
```yaml
# config-prod.yaml
shared_directory: "/data/shared"
processing_timeout: 180     # –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π timeout
max_retries: 3             # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ retry
log_level: "INFO"          # –£–º–µ—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

api:
  host: "0.0.0.0"          # –î–æ—Å—Ç—É–ø —Å–æ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
  port: 8000
  debug: false             # –û—Ç–∫–ª—é—á–µ–Ω debug

whisperx:
  default_model: "small"         # –ë–∞–ª–∞–Ω—Å –∫–∞—á–µ—Å—Ç–≤–∞ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏
  default_compute_type: "float16" # –≠–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏
  default_language: null         # –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞
  batch_size: 16               # –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π batch
  device: "cuda"               # GPU –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞

monitoring:
  enabled: true
  scan_interval: 60        # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏
```yaml
# config-highload.yaml
shared_directory: "/fast-ssd/shared"
processing_timeout: 120         # –ë—ã—Å—Ç—Ä—ã–π timeout
max_retries: 2                 # –ú–µ–Ω—å—à–µ retry –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏
log_level: "WARNING"           # –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

api:
  host: "0.0.0.0"
  port: 8000
  debug: false

whisperx:
  default_model: "base"          # –ë—ã—Å—Ç—Ä–∞—è –º–æ–¥–µ–ª—å
  default_compute_type: "float16" # –≠–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏
  default_language: null
  batch_size: 32               # –ë–æ–ª—å—à–æ–π batch –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏
  device: "cuda"               # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ GPU

monitoring:
  enabled: false           # –û—Ç–∫–ª—é—á–µ–Ω–æ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤
  scan_interval: 300       # –†–µ–¥–∫–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
```

## üåç –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### Docker –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
```bash
# –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ —á–µ—Ä–µ–∑ ENV
SHARED_DIRECTORY=/data/shared
PROCESSING_TIMEOUT=180
MAX_RETRIES=3
LOG_LEVEL=INFO

# API –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
API_HOST=0.0.0.0
API_PORT=8000
API_DEBUG=false

# WhisperX –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
WHISPERX_MODEL=small
WHISPERX_COMPUTE_TYPE=float32
WHISPERX_DEVICE=cpu
WHISPERX_BATCH_SIZE=16

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
MONITORING_ENABLED=true
MONITORING_SCAN_INTERVAL=60
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫
1. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** (–Ω–∞–∏–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
2. **config.yaml** —Ñ–∞–π–ª
3. **–ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é** –≤ –∫–æ–¥–µ

### –ü—Ä–∏–º–µ—Ä docker-compose —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
```yaml
# docker-compose.yml
version: '3.8'
services:
  audio-transcriber:
    build: .
    ports:
      - "8000:8000"
    environment:
      - SHARED_DIRECTORY=/app/shared
      - LOG_LEVEL=INFO
      - WHISPERX_MODEL=small
      - WHISPERX_DEVICE=cpu
    volumes:
      - ./shared:/app/shared
      - ./whisper_cache:/app/whisper_cache
```

## üîç –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
```python
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ config.yaml
def validate_config(config: dict):
    """
    –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
    - –°—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
    - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏–π timeout –∏ retries
    - –í–∞–ª–∏–¥–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è model, compute_type, device
    - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–æ—Ä—Ç–æ–≤ –∏ host –∞–¥—Ä–µ—Å–æ–≤
    """
    pass
```

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è:**
```
ERROR: shared_directory './shared' does not exist
Solution: Create directory or update path
```

**–ù–µ–≤–µ—Ä–Ω–∞—è –º–æ–¥–µ–ª—å:**
```
ERROR: whisperx.default_model 'invalid' not in ['tiny', 'base', 'small', 'medium', 'large']
Solution: Use valid model name
```

**–ù–µ–≤–µ—Ä–Ω—ã–π –ø–æ—Ä—Ç:**
```
ERROR: api.port 99999 is out of valid range (1-65535)
Solution: Use valid port number
```

## üîß –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫

### –ß–µ—Ä–µ–∑ API (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)
```bash
# –ò–∑–º–µ–Ω–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
curl -X POST http://localhost:8000/config \
  -H "Content-Type: application/json" \
  -d '{"log_level": "DEBUG"}'

# –ò–∑–º–µ–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é  
curl -X POST http://localhost:8000/config \
  -H "Content-Type: application/json" \
  -d '{"whisperx": {"default_model": "base"}}'
```

### –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
# –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–∏–≥–Ω–∞–ª–∞ –¥–ª—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ config.yaml
kill -HUP <process_id>
```

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è CPU –æ–±—Ä–∞–±–æ—Ç–∫–∏
```yaml
whisperx:
  default_model: "base"           # –ù–µ —Å–ª–∏—à–∫–æ–º —Ç—è–∂–µ–ª–∞—è –º–æ–¥–µ–ª—å
  default_compute_type: "float32" # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
  batch_size: 8                  # –£–º–µ—Ä–µ–Ω–Ω—ã–π batch size
  device: "cpu"
```

### –î–ª—è GPU –æ–±—Ä–∞–±–æ—Ç–∫–∏
```yaml
whisperx:
  default_model: "large"          # –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª—å—à–∏–µ –º–æ–¥–µ–ª–∏
  default_compute_type: "float16" # –≠–∫–æ–Ω–æ–º–∏—è GPU –ø–∞–º—è—Ç–∏
  batch_size: 32                 # –ë–æ–ª—å—à–∏–π batch –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏
  device: "cuda"
```

### –î–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π –ø–∞–º—è—Ç–∏
```yaml
whisperx:
  default_model: "tiny"           # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å
  default_compute_type: "int8"    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—è
  batch_size: 4                  # –ú–∞–ª–µ–Ω—å–∫–∏–π batch
  device: "cpu"
```

---

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 3 –Ω–æ—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0
