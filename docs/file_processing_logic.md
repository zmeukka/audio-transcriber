# üîÑ –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤ Audio Transcriber

## üìä –°–æ—Å—Ç–æ—è–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã

### –î–∏–∞–≥—Ä–∞–º–º–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π
```
[–ù–æ–≤—ã–π —Ñ–∞–π–ª] ‚Üí [–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è] ‚Üí [–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –æ—á–µ—Ä–µ–¥—å] ‚Üí [–û–±—Ä–∞–±–æ—Ç–∫–∞] ‚Üí [–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ]
     ‚Üì                    ‚Üì                        ‚Üì                  ‚Üì             ‚Üì
file_not_found        pending               processing         completed/error
```

### –î–µ—Ç–∞–ª—å–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π

| –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ | API –∑–∞–ø—Ä–æ—Å | –†–µ–∑—É–ª—å—Ç–∞—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------------|------------|-----------|----------|
| `file_not_found` | POST /transcribe | `file_not_found` | –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω –ø–æ—Å–ª–µ 3 –ø–æ–ø—ã—Ç–æ–∫ |
| `null` (–Ω–æ–≤—ã–π —Ñ–∞–π–ª) | POST /transcribe | `pending` | –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏ |
| `pending` | POST /transcribe | `processing` (–µ—Å–ª–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç API) | –í–æ–∑–≤—Ä–∞—Ç —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ |
| `processing` | POST /transcribe | `processing` | –í–æ–∑–≤—Ä–∞—Ç —Å—Ç–∞—Ç—É—Å–∞ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º |
| `completed` | POST /transcribe | `completed` | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ |
| `error` | POST /transcribe | `pending` | –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏ (–ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞) |
| –õ—é–±–æ–µ | DELETE /transcribe | `success` | –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ |

## üîç –ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–∞–π–ª–æ–≤

### checkFileStatus() - –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
```python
async def checkFileStatus(filename: str) -> TaskStatus:
    """
    –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Ñ–∞–π–ª–∞ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É:
    1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞
    2. –ü—Ä–æ–≤–µ—Ä–∫–∞ .result —Ñ–∞–π–ª–∞ (COMPLETED)  
    3. –ü—Ä–æ–≤–µ—Ä–∫–∞ .in_progress —Ñ–∞–π–ª–∞ (PROCESSING)
    4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á –≤ –æ—á–µ—Ä–µ–¥–∏ (PENDING)
    5. –í–æ–∑–≤—Ä–∞—Ç None –µ—Å–ª–∏ –Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
    """
    
    # 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
    if not await file_exists(filename):
        return TaskStatus.FILE_NOT_FOUND
    
    # 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
    if await result_exists(filename):
        return TaskStatus.COMPLETED
    
    # 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
    in_progress_info = await get_processing_info(filename)
    if in_progress_info:
        if in_progress_info.get("status") == "error":
            return TaskStatus.ERROR
        return TaskStatus.PROCESSING
    
    # 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á
    task_info = await get_task_info(filename) 
    if task_info:
        return TaskStatus.PENDING
    
    # 5. –ù–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∞–π–ª–µ
    return None
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞ (—Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ –ø–æ–ø—ã—Ç–∫–∞–º–∏)
```python
async def check_file_existence(filename: str) -> bool:
    """
    –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å 3 –ø–æ–ø—ã—Ç–∫–∞–º–∏ –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 1 —Å–µ–∫—É–Ω–¥–∞
    """
    for attempt in range(3):
        if await file_exists(filename):
            return True
        if attempt < 2:  # –ù–µ –∂–¥–∞—Ç—å –ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø–æ–ø—ã—Ç–∫–∏
            await asyncio.sleep(1)
    return False
```

## üéØ –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –∑–∞–¥–∞—á

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã (–ø–æ —É–±—ã–≤–∞–Ω–∏—é –≤–∞–∂–Ω–æ—Å—Ç–∏)
1. **DELETE (0)** - –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É
2. **API (1)** - –ó–∞–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ REST API  
3. **AUTO_SCAN (2)** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤

### –õ–æ–≥–∏–∫–∞ –æ—á–µ—Ä–µ–¥–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤
```python
class ProcessingTask:
    def __lt__(self, other):
        # –ú–µ–Ω—å—à–∏–π –Ω–æ–º–µ—Ä = –≤—ã—à–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
        if self.priority != other.priority:
            return self.priority < other.priority
        # –ü—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–µ - —Å—Ç–∞—Ä—ã–µ –∑–∞–¥–∞—á–∏ –ø–µ—Ä–≤—ã–º–∏
        return self.created_at < other.created_at
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ DELETE –∑–∞–ø—Ä–æ—Å–æ–≤
```python
async def handle_delete_request(filename: str):
    """
    DELETE –∑–∞–ø—Ä–æ—Å—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ:
    1. –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á
    2. –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–µ—Å–ª–∏ —Ñ–∞–π–ª –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è)
    3. –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
    """
    # –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –æ—á–µ—Ä–µ–¥–∏ (–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
    await task_manager.remove_task(filename)
    
    # –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
    await task_manager.interrupt_processing(filename)
    
    # –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
    deleted_files = await file_manager.delete_all_related_files(filename)
    
    return {"status": "success", "files_deleted": deleted_files}
```

## üìÅ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### .in_progress —Ñ–∞–π–ª—ã
–°–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–∏ –Ω–∞—á–∞–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ —Å–æ–¥–µ—Ä–∂–∞—Ç:
- `task_id` - ID –∑–∞–¥–∞—á–∏
- `status` - —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å ("processing" –∏–ª–∏ "error")  
- `started_at` - –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- `progress` - –ø—Ä–æ–≥—Ä–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ (0-100)
- `priority` - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞–¥–∞—á–∏
- `model_used` - –∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –º–æ–¥–µ–ª—å

### .result —Ñ–∞–π–ª—ã  
–°–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∏ —Å–æ–¥–µ—Ä–∂–∞—Ç:
- –ü–æ–ª–Ω—ã–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (—è–∑—ã–∫, –º–æ–¥–µ–ª—å, –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏)
- –°–µ–≥–º–µ–Ω—Ç—ã —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ–≤, —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å)

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞
```python
async def cleanup_temporary_files():
    """
    –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:
    - .in_progress —Ñ–∞–π–ª—ã —Å—Ç–∞—Ä—à–µ 1 —á–∞—Å–∞ (–∑–∞–≤–∏—Å—à–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã)
    - –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã WhisperX
    - –õ–æ–≥ —Ñ–∞–π–ª—ã —Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π
    """
    pass
```

## üîÑ –ê–ª–≥–æ—Ä–∏—Ç–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á

### –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏
```python
async def processing_loop():
    """
    –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á:
    1. –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ —Å –Ω–∞–∏–≤—ã—Å—à–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º
    2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ "processing"
    3. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ —á–µ—Ä–µ–∑ WhisperX
    4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
    5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    """
    while not stop_processing:
        # –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–π –∑–∞–¥–∞—á–∏
        task = await get_highest_priority_task()
        if not task:
            await asyncio.sleep(1)
            continue
        
        # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á–∏
        try:
            await process_task(task)
        except Exception as e:
            await handle_task_error(task, e)
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ –ø–æ–ø—ã—Ç–∫–∞–º–∏
```python
async def handle_task_error(task: ProcessingTask, error: Exception):
    """
    –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å —Å–∏—Å—Ç–µ–º–æ–π –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫:
    - –ú–∞–∫—Å–∏–º—É–º 3 –ø–æ–ø—ã—Ç–∫–∏
    - –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞: 2^attempt —Å–µ–∫—É–Ω–¥
    - –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ - —Å—Ç–∞—Ç—É—Å ERROR
    """
    task.retry_count += 1
    task.error_message = str(error)
    
    max_retries = config.get("max_retries", 3)
    if task.retry_count < max_retries:
        # –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
        delay = 2 ** task.retry_count
        await asyncio.sleep(delay)
        
        # –í–æ–∑–≤—Ä–∞—Ç –≤ –æ—á–µ—Ä–µ–¥—å
        task.status = TaskStatus.PENDING
        await add_task_to_queue(task)
    else:
        # –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –ø–æ–ø—ã—Ç–æ–∫
        task.status = TaskStatus.ERROR
        await update_status_file(task.filename, TaskStatus.ERROR, {
            "error": task.error_message,
            "retry_count": task.retry_count
        })
```

## üîç –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ shared –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
```python
class FileMonitor:
    """
    –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤ shared –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:
    - –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫—É–Ω–¥
    - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º AUTO_SCAN
    - –ò—Å–∫–ª—é—á–µ–Ω–∏–µ sample —Ñ–∞–π–ª–æ–≤ –∏–∑ –∞–≤—Ç–æ–æ–±—Ä–∞–±–æ—Ç–∫–∏
    """
    
    async def scan_for_new_files():
        """
        –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –Ω–æ–≤—ã–µ –∞—É–¥–∏–æ—Ñ–∞–π–ª—ã:
        1. –ü–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
        2. –ò—Å–∫–ª—é—á–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —Å "sample" –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏
        3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è .in_progress/.result —Ñ–∞–π–ª–æ–≤
        4. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á AUTO_SCAN –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞
        """
        supported_formats = ['.mp3', '.wav', '.flac', '.m4a', '.ogg', '.wma']
        
        for file_path in shared_directory.iterdir():
            if file_path.suffix.lower() in supported_formats:
                # –ò—Å–∫–ª—é—á–µ–Ω–∏–µ sample —Ñ–∞–π–ª–æ–≤
                if 'sample' in file_path.name.lower():
                    continue
                
                # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ—Å—Ç–∏
                if await is_file_processed(file_path.name):
                    continue
                
                # –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –∞–≤—Ç–æ—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
                await task_manager.add_task(
                    filename=file_path.name,
                    priority=TaskPriority.AUTO_SCAN
                )
```

## ‚è±Ô∏è Timeouts –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### –í—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- **Timeout –æ–±—Ä–∞–±–æ—Ç–∫–∏:** 180 —Å–µ–∫—É–Ω–¥ (3 –º–∏–Ω—É—Ç—ã)
- **Retry –∑–∞–¥–µ—Ä–∂–∫–∏:** 2, 4, 8 —Å–µ–∫—É–Ω–¥ (—ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è)
- **–ú–∞–∫—Å–∏–º—É–º –ø–æ–ø—ã—Ç–æ–∫:** 3
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:** 60 —Å–µ–∫—É–Ω–¥
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–∞–π–ª–∞:** 1 —Å–µ–∫—É–Ω–¥–∞ (3 –ø–æ–ø—ã—Ç–∫–∏)

### –û–±—Ä–∞–±–æ—Ç–∫–∞ timeout'–æ–≤
```python
async def process_with_timeout(task: ProcessingTask):
    """
    –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á–∏ —Å timeout:
    - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ asyncio.wait_for()
    - –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å—à–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ WhisperX
    - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ ERROR –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏
    """
    timeout = config.get("processing_timeout", 180)
    
    try:
        await asyncio.wait_for(
            transcribe_audio(task),
            timeout=timeout
        )
    except asyncio.TimeoutError:
        await interrupt_current_process()
        raise TimeoutError(f"Processing timeout after {timeout}s")
```

## üêõ Debug —Ä–µ–∂–∏–º

### –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
–ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–Ω–æ–º debug —Ä–µ–∂–∏–º–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
- –ü–æ–ª–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ .in_progress —Ñ–∞–π–ª–æ–≤
- Timeline –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–∞
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–∞—Ö

```python
async def create_debug_response(filename: str) -> dict:
    """
    –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
    """
    debug_info = {
        "file_exists": await file_exists(filename),
        "processing_info": await get_processing_info(filename),
        "queue_position": await get_queue_position(filename),
        "task_info": await get_task_info(filename),
        "system_info": await get_system_info()
    }
    return debug_info
```

---

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 3 –Ω–æ—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0
